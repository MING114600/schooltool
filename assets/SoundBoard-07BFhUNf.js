import{c as n,r as s,j as e,X as W,F as P,g as B,A as E,T as X,H as G}from"./index-FQBKIusJ.js";import{S as H}from"./save-CF8G8tc3.js";import{T as Y,R as Z}from"./timer-C1Lo72OE.js";import{b as K,a as J,V as O}from"./volume-2-DF--ebQ2.js";const Q=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],F=n("bell-off",Q);const ee=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],te=n("bell",ee);const se=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ae=n("chevron-down",se);const re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],le=n("circle-x",re);const ne=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],oe=n("coins",ne);const ie=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],L=n("dices",ie);const de=[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]],ce=n("drum",de);const ue=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ee=n("eye",ue);const xe=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],he=n("gem",xe);const me=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],be=n("grip-horizontal",me);const pe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],U=n("maximize-2",pe);const ge=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],fe=n("megaphone",ge);const ke=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ve=n("minimize-2",ke);const ye=[["path",{d:"M5 12h14",key:"1ays0h"}]],je=n("minus",ye);const we=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],Ne=n("party-popper",we);const Me=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Le=n("shuffle",Me);const Ce=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Se=n("sparkles",Ce);const ze=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$e=n("user",ze);const _e=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ae=n("zap",_e),q=({title:b,isOpen:h,onClose:r,children:d,icon:u,initialPosition:x={x:20,y:80},width:p="w-72"})=>{const[o,y]=s.useState(x),[j,g]=s.useState(!1),[i,z]=s.useState({x:0,y:0}),[c,M]=s.useState(!1),w=s.useRef(null);s.useEffect(()=>{h&&M(!1)},[h]),s.useEffect(()=>{const l=k=>{if(j){k.preventDefault();const C=k.clientX-i.x,a=k.clientY-i.y;y({x:C,y:a})}},f=()=>{g(!1)};return j&&(window.addEventListener("mousemove",l),window.addEventListener("mouseup",f)),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",f)}},[j,i]);const m=l=>{g(!0),z({x:l.clientX-o.x,y:l.clientY-o.y})};return h?e.jsxs("div",{ref:w,className:`
        fixed z-[100] flex flex-col
        bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl
        border border-white/20 dark:border-slate-700
        shadow-2xl rounded-2xl overflow-hidden transition-shadow duration-300
        ${j?"cursor-grabbing scale-[1.02] shadow-xl ring-2 ring-blue-400/30":""}
        ${c?"h-12 w-auto min-w-[200px]":p}
      `,style:{left:o.x,top:o.y,willChange:"transform, left, top"},children:[e.jsxs("div",{onMouseDown:m,className:`
          h-12 flex items-center justify-between px-3 cursor-grab select-none
          bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-700/50
          transition-colors hover:bg-slate-100 dark:hover:bg-slate-800
        `,children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[u&&e.jsx(u,{size:18,className:j?"text-blue-500":"text-slate-400 dark:text-slate-500"}),e.jsx("span",{className:"truncate",children:b})]}),e.jsxs("div",{className:"flex items-center gap-1",onMouseDown:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>M(!c),className:"p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",title:c?"展開":"縮小",children:c?e.jsx(U,{size:14}):e.jsx(je,{size:14})}),e.jsx("button",{onClick:r,className:"p-1.5 rounded-lg hover:bg-rose-100 dark:hover:bg-rose-900/30 text-slate-400 hover:text-rose-500 transition-colors",title:"關閉",children:e.jsx(W,{size:14})})]})]}),!c&&e.jsx("div",{className:"p-4 max-h-[80vh] overflow-y-auto custom-scrollbar animate-in fade-in duration-300",children:d}),c&&e.jsx("div",{className:"absolute bottom-1 w-full flex justify-center opacity-20 pointer-events-none",children:e.jsx(be,{size:12})})]}):null},Pe=({isOpen:b,onClose:h})=>{const{playAudio:r}=P(),[d,u]=s.useState("timer"),[x,p]=s.useState(0),[o,y]=s.useState(!1),[j,g]=s.useState(0),[i,z]=s.useState(""),[c,M]=s.useState(""),[w,m]=s.useState(!1),[l,f]=s.useState(!1),k=s.useRef(null),C=s.useRef(null),a=s.useRef(null);s.useEffect(()=>(o?k.current=setInterval(()=>{p(t=>d==="timer"?(t===31&&r("alert"),t<=11&&t>1&&r("tick"),t<=1?(clearInterval(k.current),y(!1),$(),0):t-1):t+1)},1e3):clearInterval(k.current),()=>clearInterval(k.current)),[o,d,r]),s.useEffect(()=>(l?(r("whistle"),setTimeout(()=>{r("alarm"),C.current=setInterval(()=>{r("alarm")},1200)},1500),a.current=setTimeout(()=>{f(!1)},5800)):(C.current&&clearInterval(C.current),a.current&&clearTimeout(a.current)),()=>{C.current&&clearInterval(C.current),a.current&&clearTimeout(a.current)}),[l,r]);const $=()=>{f(!0)},T=()=>{f(!1)},R=t=>{const A=Math.floor(t/60),I=t%60;return`${A.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`},N=t=>{const A=Math.round(t*60);p(A),g(A),y(!1),f(!1),u("timer"),z(""),M("")},_=()=>{const t=parseInt(i)||0,A=parseInt(c)||0;if(t===0&&A===0)return;const I=t*60+A;p(I),g(I),y(!1),f(!1),u("timer")},v=()=>{if(l){T();return}x===0&&d==="timer"||y(!o)},D=()=>{y(!1),f(!1),p(d==="timer"?j:0)},V=(t=!1)=>e.jsxs("div",{className:`flex flex-col items-center justify-center ${t?"h-full w-full":"gap-4"}`,children:[e.jsxs("div",{className:`
                relative group cursor-pointer tabular-nums leading-none tracking-tight font-black font-mono select-none transition-all
                ${t?"text-[25vw] text-white drop-shadow-2xl":"text-6xl text-slate-800 dark:text-white"}
                ${l?"animate-bounce text-red-100":""}
                ${x<=10&&d==="timer"&&o?"text-red-500 scale-110":""} // ★ 增加視覺提示：最後10秒變紅放大
            `,onClick:()=>{!o&&!l&&(d==="timer"?(u("stopwatch"),p(0)):(u("timer"),p(j)))},children:[R(x),l&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 animate-ping opacity-75",children:e.jsx(te,{size:t?300:100,fill:"currentColor"})})]}),e.jsxs("div",{className:`flex items-center gap-6 ${t?"scale-150 mt-12":"mt-2"}`,children:[e.jsx("button",{onClick:v,className:`
                rounded-full flex items-center justify-center text-white shadow-lg transition-all active:scale-95 
                ${t?"w-24 h-24 shadow-2xl":"w-14 h-14 hover:scale-105"}
                ${l?"bg-red-500 animate-pulse":o?"bg-amber-500":"bg-emerald-500"}
             `,children:l?e.jsx(F,{size:t?40:24}):o?e.jsx(K,{size:t?40:24,fill:"currentColor"}):e.jsx(J,{size:t?40:24,fill:"currentColor",className:"ml-1"})}),e.jsx("button",{onClick:D,className:`
                rounded-full flex items-center justify-center transition-all active:scale-95
                ${t?"w-24 h-24 bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"w-14 h-14 bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}
             `,children:e.jsx(Z,{size:t?36:22})})]})]});return w?e.jsxs("div",{className:`fixed inset-0 z-[200] flex flex-col items-center justify-center transition-colors duration-500 ${l?"bg-red-600":"bg-slate-900"}`,children:[e.jsxs("div",{className:"absolute top-6 right-6 flex gap-4 z-50",children:[e.jsx("button",{onClick:()=>m(!1),className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all",children:e.jsx(ve,{size:32})}),e.jsx("button",{onClick:h,className:"p-3 bg-white/10 hover:bg-red-500/80 rounded-full text-white backdrop-blur-md transition-all",children:e.jsx(H,{size:32,className:"rotate-45"})})]}),V(!0)]}):e.jsx(q,{title:"課堂計時",isOpen:b,onClose:h,icon:Y,initialPosition:{x:320,y:150},width:"w-72",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 relative",children:[e.jsx("button",{onClick:()=>m(!0),className:"absolute -top-2 -right-2 p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(U,{size:16})}),V(!1),d==="timer"&&e.jsxs("div",{className:"w-full space-y-3 pt-2 border-t border-slate-100 dark:border-slate-800/50",children:[e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,3,5,10].map(t=>e.jsxs("button",{onClick:()=>N(t),className:"py-1.5 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 active:bg-slate-200 transition-colors",children:[t,"分"]},t))}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-800/50 p-1.5 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx("input",{type:"number",placeholder:"00",value:i,onChange:t=>z(t.target.value),className:"w-full text-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-md py-1 text-sm font-bold text-slate-700 dark:text-slate-200 outline-none focus:border-blue-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"分"}),e.jsx("input",{type:"number",placeholder:"00",value:c,onChange:t=>M(t.target.value),className:"w-full text-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-md py-1 text-sm font-bold text-slate-700 dark:text-slate-200 outline-none focus:border-blue-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"秒"})]}),e.jsx("button",{onClick:_,className:"p-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-sm",children:e.jsx(H,{size:16})})]})]})]})})},qe=({isOpen:b,onClose:h,classes:r=[],defaultClassId:d})=>{const{playAudio:u}=P(),[x,p]=s.useState(d||r[0]?.id),[o,y]=s.useState("student"),[j,g]=s.useState("準備抽籤"),[i,z]=s.useState(!1),[c,M]=s.useState(null),w=s.useRef(null);s.useEffect(()=>{d&&p(d)},[d]);const m=s.useMemo(()=>r.find(a=>a.id===x),[r,x]),l=s.useMemo(()=>m?m.students:[],[m]),f=s.useMemo(()=>{if(!m?.attendanceRecords)return{};const a=new Date().toLocaleDateString("en-CA");return m.attendanceRecords[a]||{}},[m]);s.useEffect(()=>(b?!i&&!c&&g("準備抽籤"):(w.current&&clearInterval(w.current),z(!1)),()=>{w.current&&clearInterval(w.current)}),[b]),s.useEffect(()=>{i||(g("準備抽籤"),M(null))},[o,x]);const k=a=>{const $=f[a.id]||"present";return E&&E[$]?E[$].isPresent:$==="present"||$==="late"},C=()=>{if(i)return;let a=[];if(o==="student")a=l.filter(N=>k(N)).map(N=>`${N.number?N.number+" ":""}${N.name}`);else{const N=l.filter(v=>k(v)),_=new Set(N.map(v=>v.group).filter(v=>v));a=Array.from(_).sort((v,D)=>parseInt(v)-parseInt(D)).map(v=>`第 ${v} 組`)}if(a.length===0){g("無人可抽"),u("wrong");return}z(!0),M(null);const $=2e3,T=50,R=Date.now();u("drumroll"),w.current=setInterval(()=>{if(Date.now()-R>=$){clearInterval(w.current);const _=a[Math.floor(Math.random()*a.length)];g(_),M(_),z(!1),u("level_up")}else{const _=a[Math.floor(Math.random()*a.length)];g(_)}},T)};return e.jsx(q,{title:"幸運抽籤",isOpen:b,onClose:h,icon:L,initialPosition:{x:320,y:500},children:e.jsxs("div",{className:"flex flex-col gap-4",children:[r.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:x,onChange:a=>p(a.target.value),disabled:i,className:"w-full appearance-none bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 text-sm font-bold py-2 pl-3 pr-8 rounded-lg cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.students.length,"人)"]},a.id))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-500",children:e.jsx(ae,{size:16})})]}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>y("student"),disabled:i,className:`flex-1 py-1.5 rounded-md text-xs font-bold transition-all flex items-center justify-center gap-1 ${o==="student"?"bg-white dark:bg-slate-700 shadow text-blue-600 dark:text-blue-400":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx($e,{size:14})," 抽學生"]}),e.jsxs("button",{onClick:()=>y("group"),disabled:i,className:`flex-1 py-1.5 rounded-md text-xs font-bold transition-all flex items-center justify-center gap-1 ${o==="group"?"bg-white dark:bg-slate-700 shadow text-purple-600 dark:text-purple-400":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(B,{size:14})," 抽小組"]})]}),e.jsxs("div",{className:`
            relative flex flex-col items-center justify-center min-h-[120px] rounded-xl border-2 transition-all duration-300
            ${c?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700/50 scale-105 shadow-lg":"bg-slate-50 dark:bg-slate-800/50 border-dashed border-slate-200 dark:border-slate-700"}
        `,children:[c&&e.jsx("div",{className:"absolute -top-3 -right-3 animate-bounce",children:e.jsx("div",{className:"bg-amber-400 text-white p-1.5 rounded-full shadow-lg",children:e.jsx(Se,{size:16,fill:"currentColor"})})}),e.jsx("div",{className:`
                font-black text-center transition-all px-2 break-all leading-tight
                ${c?"text-3xl md:text-4xl text-amber-600 dark:text-amber-400":"text-2xl text-slate-300 dark:text-slate-600"}
            `,children:j}),!c&&!i&&e.jsxs("div",{className:"mt-2 text-xs text-slate-400 font-medium",children:["目標：",m?.name||"未知班級"]}),c&&e.jsx("div",{className:"mt-2 text-xs font-bold text-amber-600/70 dark:text-amber-400/70 uppercase tracking-widest animate-pulse",children:"Winner!"})]}),e.jsx("button",{onClick:C,disabled:i,className:`
            w-full py-2.5 rounded-xl font-bold text-white shadow-md transition-all flex items-center justify-center gap-2 active:scale-95
            ${i?"bg-slate-400 dark:bg-slate-700 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 dark:from-blue-600 dark:to-indigo-700 hover:opacity-90 hover:shadow-lg"}
          `,children:i?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:18,className:"animate-spin"})," 抽選中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{size:18})," 開始抽選"]})})]})})},S=({icon:b,label:h,onClick:r,colorClass:d,subLabel:u,isLarge:x})=>e.jsxs("button",{onClick:r,className:`
      relative group flex flex-col items-center justify-center rounded-xl 
      border transition-all duration-100 active:scale-95 shadow-sm hover:shadow-md
      bg-white dark:bg-slate-800 
      ${d}
      ${x?"p-3":"p-2.5"}
    `,children:[e.jsx(b,{size:x?26:22,className:"mb-1 transition-transform group-hover:scale-110"}),e.jsx("span",{className:`${x?"text-sm":"text-xs"} font-bold`,children:h}),u&&e.jsx("span",{className:"text-[9px] opacity-70 scale-90 font-mono mt-0.5",children:u})]}),Ve=({isOpen:b,onClose:h})=>{const{playAudio:r}=P();return e.jsx(q,{title:"課堂音效",isOpen:b,onClose:h,icon:O,initialPosition:{x:window.innerWidth-340,y:100},width:"w-[320px]",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 ml-1",children:"秩序管控"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{icon:fe,label:"裁判哨音",subLabel:"(Stop!)",isLarge:!0,colorClass:"text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40",onClick:()=>r("whistle")}),e.jsx(S,{icon:X,label:"注意警告",subLabel:"(Alert)",isLarge:!0,colorClass:"text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-900/50 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/40",onClick:()=>r("alert")})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 ml-1",children:"問答回饋"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(S,{icon:G,label:"答對了",colorClass:"text-emerald-600 dark:text-emerald-400 border-emerald-100 dark:border-emerald-900/50 hover:bg-emerald-50 dark:hover:bg-emerald-900/20",onClick:()=>r("correct")}),e.jsx(S,{icon:le,label:"答錯了",colorClass:"text-rose-600 dark:text-rose-400 border-rose-100 dark:border-rose-900/50 hover:bg-rose-50 dark:hover:bg-rose-900/20",onClick:()=>r("wrong")}),e.jsx(S,{icon:Ae,label:"失誤/扣分",colorClass:"text-purple-600 dark:text-purple-400 border-purple-100 dark:border-purple-900/50 hover:bg-purple-50 dark:hover:bg-purple-900/20",onClick:()=>r("negative")})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 ml-1",children:"遊戲氣氛"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx(S,{icon:ce,label:"鼓聲",colorClass:"text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:()=>r("drumroll")}),e.jsx(S,{icon:oe,label:"金幣",colorClass:"text-amber-600 dark:text-amber-400 border-amber-100 dark:border-amber-900/50 hover:bg-amber-50 dark:hover:bg-amber-900/20",onClick:()=>r("coin")}),e.jsx(S,{icon:he,label:"升級",colorClass:"text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-900/50 hover:bg-indigo-50 dark:hover:bg-indigo-900/20",onClick:()=>r("level_up")}),e.jsx(S,{icon:Ne,label:"歡呼",colorClass:"text-pink-600 dark:text-pink-400 border-pink-100 dark:border-pink-900/50 hover:bg-pink-50 dark:hover:bg-pink-900/20",onClick:()=>r("applause")})]})]}),e.jsx("div",{className:"text-[9px] text-center text-slate-400/60 dark:text-slate-600 pt-1 border-t border-slate-100 dark:border-slate-800 mt-1",children:"Web Audio API Synthetic Sounds"})]})})};export{te as B,ae as C,L as D,Ee as E,qe as L,fe as M,Le as S,Pe as T,$e as U,Ae as Z,Ve as a,Se as b,je as c};
